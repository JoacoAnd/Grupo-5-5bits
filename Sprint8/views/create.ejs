<%- include ( './partials/head' ); %>
    <%- include ( './partials/header' ); %>

        <main>
            <div class="img-left">
            </div>
            <form method="post" enctype="multipart/form-data" action="/products" class="formcrearproducto" id="producto">
            <div>
                <% if (locals.errors && errors) {%>
                    <% errors.forEach(err=> { %>
                        <p>
                            <%= err.msg %>
                        </p>
                        <% }) %>
                            <% } %>
            </div>
                <h2>Administración de productos</h2>
                <div class="inputs">
                    <input type="text" name="nombre" id="nombre" placeholder="Nombre" value="<%= locals.old && old.nombre ? old.nombre : ''  %>"/>
                    <label for="nombre" style="color: red;" class="errNombre errorescreate"></label>
                    <input type="text" name="descripcion" id="descripcion" placeholder="Descripción" value="<%= locals.old && old.descripcion ? old.descripcion : ''  %>"/>
                    <label for="descripcion" style="color: red;" class="errDescripcion errorescreate"></label>
                    <select name="categoria" id="categoria">
                    <option value="">[Categoría]</option>
                    <% for(let categoria of categorias) { %>
                        <option value= "<%= categoria.id_categoria %>" <%= locals.old && old.categoria && old.categoria == categoria.id_categoria ? 'selected' : ''  %>><%= categoria.categoria %> </option>
                    <% } %>
                    </select>
                </div>
                <h3>Talles disponibles:</h3>
                <div class="check">
                    <% for(let talle of talles) { %>
                        <input type="checkbox" value="<%= talle.id_talle %>" name="talles" <%= locals.old && old.talles && old.talles.includes(talle.id_talle.toString()) ? 'checked' : '' %> >
                        <%= talle.talle %>
                            <% } %>
                </div>
                <div class="inputs">
                    $ <input type="number" name="precio" id="precio" placeholder="Precio" value="<%= locals.old && old.precio ? old.precio : ''  %>"/>
                    <label for="precio" style="color: red;" class="errPrecio errorescreate"></label>
                    <label for="imagen">Imagen del producto:</label> <input type="file" name="imagen" id="imagen" />
                    <label for="imagen" style="color: red;" class="errImagen errorescreate"></label>
                </div>

                <button type="submit" class="guardar">Guardar</button>
            </form>
            <div class="img-right">
            </div>
        </main>
        <script src="/js/createProduct.js"></script>

        <%- include ( './partials/footer.ejs' ); %>